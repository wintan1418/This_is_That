<div id="place_<%= place[:yelp_id] %>" class="group p-5 bg-slate-900/50 border border-white/10 rounded-2xl hover:border-teal-500/30 transition-all">
  <div class="flex gap-4">
    <!-- Image -->
    <% if place[:image_url].present? %>
      <img src="<%= place[:image_url] %>" alt="<%= place[:name] %>" class="w-20 h-20 rounded-xl object-cover flex-shrink-0">
    <% else %>
      <div class="w-20 h-20 rounded-xl bg-gradient-to-br from-teal-500/20 to-amber-500/20 flex items-center justify-center flex-shrink-0">
        <span class="text-2xl">üìç</span>
      </div>
    <% end %>

    <!-- Info -->
    <div class="flex-1 min-w-0">
      <h3 class="font-semibold text-lg truncate"><%= place[:name] %></h3>
      <p class="text-sm text-gray-400 truncate"><%= place[:address] %></p>
      
      <div class="flex items-center gap-3 mt-2 text-sm">
        <% if place[:rating] %>
          <span class="text-yellow-400">‚òÖ <%= place[:rating] %></span>
        <% end %>
        <% if place[:price] %>
          <span class="text-teal-400"><%= place[:price] %></span>
        <% end %>
        <% if place[:reviews_count] %>
          <span class="text-gray-500"><%= place[:reviews_count] %> reviews</span>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex items-center gap-2 mt-4 pt-4 border-t border-white/5">
    <% if place[:url] %>
      <%= link_to "View on Yelp", place[:url], target: "_blank", class: "px-3 py-1.5 text-sm bg-white/5 rounded-lg hover:bg-white/10 transition-colors" %>
    <% end %>
    
    <% unless is_home %>
      <turbo-frame id="save_button_<%= place[:yelp_id] %>">
        <%= form_with url: save_match_place_path(id: 0), method: :post, data: { controller: "loading", action: "submit->loading#submit", loading_text_value: "Saving..." } do |f| %>

          
          <!-- We need to pass nested params properly as hidden fields or just use parameters in button_to... 
               Actually button_to is a form helper. Let's stick to form_with for custom structure or just style the button tag.
               Using HTML button for flexible content. -->
          
          <% 
            # Reconstruct params for hidden fields manually because direct object passing in hidden_field is tricky with strong params structure expected by controller
            # Controller expects params[:place][:name] etc.
          %>
          <input type="hidden" name="place[yelp_id]" value="<%= place[:yelp_id] %>">
          <input type="hidden" name="place[name]" value="<%= place[:name] %>">
          <input type="hidden" name="place[address]" value="<%= place[:address] %>">
          <input type="hidden" name="place[city]" value="<%= place[:city] %>">
          <input type="hidden" name="place[image_url]" value="<%= place[:image_url] %>">
          <input type="hidden" name="place[rating]" value="<%= place[:rating] %>">
          <input type="hidden" name="place[price]" value="<%= place[:price] %>">
          <input type="hidden" name="place[phone]" value="<%= place[:phone] %>">
          <input type="hidden" name="place[url]" value="<%= place[:url] %>">
          <input type="hidden" name="place[category_id]" value="<%= selected_category&.id %>">

          <button type="submit" data-loading-target="button" class="inline-flex items-center gap-2 px-3 py-1.5 text-sm bg-gradient-to-r from-teal-500 to-amber-500 text-slate-900 font-medium rounded-lg hover:opacity-90 transition-opacity">
            <span data-loading-target="icon">üíæ</span>
            <svg data-loading-target="spinner" class="animate-spin hidden" style="width: 16px; height: 16px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle style="opacity: 0.25;" cx="12" cy="12" r="10" stroke="#0f172a" stroke-width="4"></circle>
              <path style="opacity: 0.75;" fill="#0f172a" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span data-loading-target="text">Save Match</span>
          </button>
        <% end %>
      </turbo-frame>
    <% end %>
  </div>
</div>
